---
layout: xmas
---

<section class="content">

	<section id="about" class="background">


		<div class="background" id="divinput">
		  	<div class="intransbox">
		  		<div class="row" style="font-size:40px;">
		  			<br>
		  			<center>
		  			<strong>  Please Enter Your Name </strong>
		  			</center>
			   </div>

			    <form>
					<div class="form-group">
						<p>
					    	<label for="input1">First name</label>
					    	<input type="string" class="form-control" id="input1" placeholder="Bob">

							<label for="input2">Last name</label>
					    	<input type="string" class="form-control" id="input2" placeholder="Dole">			    	
					    	<br>
							<button type="button" class="btn btn-danger btn-large btn-block" onclick="readname()" stlye="font-size:30px"><br><b>Find Your Card!</b><br><br></button>
							<br>
						</p>

				    </div>
				</form>

			</div>

		</div>

		<div class="background" id="divoutput" style="display:none">
		  	<div class="transbox">		

		  		<div style="font-family:Tangerine; font-size:68px; text-align:center; font-weight:bold">
		  			<br>
		  			Happy Holidays! 
		  			<br>
		  		</div>

				<div id="output1" style="font-family:Lora; font-size:20px; padding:0% 5% 0% 5%; line-height:150%"> 
				</div>				

				<div style="font-family:Tangerine; font-size:40px; text-align:center">
					<br>
		  			Warmest Regards,
		  			<br>
		  			Tiffany and Adrian
		  			<br><br>
		  		</div>

				
			<center>
		  		<img src="http://i.imgur.com/IwocOAO.jpg?1" width="400" height="400" >
		  		<img src="http://i.imgur.com/SW8BEDV.jpg?1" >
		  	</center>

		  	<br><br>

		  	</div>

		</div>

		<script> 



			function createKey() {
			    var pi = '314159265358979323846264338327' +
			        '950288419716939937510582097494' +
			        '459230781640628620899862803482' +
			        '534211706798214808651328230664' +
			        '709384460955058223172535940812' +
			        '848111745028410270193852110555' +
			        '964462294895493038196442881097' +
			        '566593344612847564823378678316' +
			        '527120190914564856692346034861' +
			        '045432664821339360726024914127'


			    var seq = []
			    for (var i = 32; i < 128; i++) {
			        seq.push(i)
			    }

			    randomizer = []

				while ((seq.length) > 0 & (pi.length > 1))
			    {
			        
			        var d0 = parseInt(pi.charAt(0))
			        var d1 = parseInt(pi.charAt(1))       
			        
			        if ((d0 * 10 + d1) < seq.length) {
			            randomizer.push(seq[(d0 * 10 + d1)])
			            seq.splice([d0 * 10 + d1],1)
			            pi = pi.slice(2, pi.length)
			        } else if (d0 < seq.length) {
			            randomizer.push(seq[d0])
			            seq.splice([d0],1)
			            pi = pi.slice(1, pi.length)
			        } else {
			            pi = pi.slice(1, pi.length)
			        }   
			    }

			    return randomizer

			}

			function unshuffleString(str)
			{

				var key = createKey()

				key_idx = []
				for (var i=32; i < 128; i++) {
					key_idx.push(key.indexOf(i) + 32)
				}

				unshuffled_string = ''
				for (var i=0; i<str.length; i++)
			    {
					unshuffled_string += String.fromCharCode(key_idx[str.charCodeAt(i)-32])
				}

				return unshuffled_string

			}


			var alldata


			function readname()
			{
				var fn = document.getElementById('input1').value;
				var ln = document.getElementById('input2').value;
				console.log(fn,ln)


                var client = new XMLHttpRequest();
                client.onreadystatechange = function() {
                    if ( client.readyState == 4 ) {
                        if ( client.status == 200 || client.status == 0 ) {
                            var rep = client.response; // || xhr.mozResponseArrayBuffer;

                            alldata = rep
                        }
                    }                    
                }

                // false makes it a synchronous call
                client.open('GET', 'cards.tsv', false);
                client.send( null );

                
                alldata = alldata.replace(/(\r\n|\n|\r)/gm,"\t");

                data = alldata.split('\t')
                                
                for (var i=0; i < data.length/3; i++)
                {
					// document.getElementById("output1").innerHTML = "Sorry, please try re-entering your name!"
                	if ( ( data[i*3].toLowerCase() == fn.toLowerCase() ) &&
                		( data[i*3 + 1].toLowerCase() == ln.toLowerCase() ) )
                	{

                		document.getElementById("output1").innerHTML = unshuffleString(data[i*3 + 2])
                		break

	               	} else {

	               		document.getElementById("output1").innerHTML = "<b>Sorry! Please refresh and try again</b>"

	               	}

                }

                $("#divoutput").fadeIn("slow");
                $("#divinput").hide();

                
			}


		</script>

	</section>




</section>
